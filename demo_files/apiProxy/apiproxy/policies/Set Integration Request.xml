<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<AssignMessage continueOnError="false" enabled="true" name="Set Integration Request">
  <DisplayName>Set Integration Request</DisplayName>
  <IgnoreUnresolvedVariables>false</IgnoreUnresolvedVariables>
  <AssignVariable>
    <Name>request_string</Name>
    <Ref>request.content</Ref>
  </AssignVariable>
  <AssignVariable>
    <Name>integration.project.id</Name>
    <Ref>organization.name</Ref>
  </AssignVariable>
  <AssignVariable>
    <Name>integration.name</Name>
    <Value>airports-integration-cicd</Value>
  </AssignVariable>
  <AssignVariable>
    <Name>integration.region</Name>
    <Value>europe-west1</Value>
  </AssignVariable>
  <Set>
    <Headers>
      <Header name="Content-Type">application/json</Header>
    </Headers>
    <Verb>POST</Verb>
    <Payload contentType="application/json">
        {
            "name": "projects/{organization.name}/locations/europe-west1/products/apigee/integrations/airports-integration-cicd",
            "trigger_id": "api_trigger/airport_cicd_API_1",
            "parameters": {
                "parameters": {
                    "key": "InputJson",
                    "value": {
                      "json_value": "{escapeJSON(json_input)}"
                }
            }
        }
      }
        </Payload>
  </Set>
  <AssignTo createNew="true" transport="http" type="request">airport_integration_request</AssignTo>
</AssignMessage>
